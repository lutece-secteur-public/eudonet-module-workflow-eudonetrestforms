<#assign idForms = -1>
<#assign idTableEudonet = "">	
<#assign idConfig = -1>
<#if taskConfig?exists>
	<#assign idForms = taskConfig.idForms>	
	<#assign idTableEudonet = taskConfig.idTableEudonet!>	
</#if>

<p class="lead">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.title}</p>

<#if taskConfig?exists && taskConfig?has_content >

<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="baseUrl">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.baseUrl} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
	<input type="text" class="form-control input-sm" name="base_url" id="base_url" tabindex="1" value="${taskConfig.baseUrl!}"/>
		
	</div>
</div>
<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="subscriberLogin">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.subscriberLogin} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
	<input type="text" class="form-control input-sm" name="subscriber_login" id="subscriber_login" tabindex="1" value="${taskConfig.subscriberLogin!}"/>
		
	</div>
</div>
<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="subscriberPassword">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.subscriberPassword} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
	<input type="text" class="form-control input-sm" name="subscriber_password" id="subscriber_password" tabindex="1" value="${taskConfig.subscriberPassword!}"/>
		
	</div>
</div>
<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="baseName">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.baseName} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
	<input type="text" class="form-control input-sm" name="base_name" id="base_name" tabindex="1" value="${taskConfig.baseName!}"/>
		
	</div>
</div>
<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="userLogin">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.userLogin} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
	<input type="text" class="form-control input-sm" name="user_login" id="user_login" tabindex="1" value="${taskConfig.userLogin!}"/>
		
	</div>
</div>
<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="userPassword">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.userPassword} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
	<input type="text" class="form-control input-sm" name="user_password" id="user_password" tabindex="1" value="${taskConfig.userPassword!}"/>
		
	</div>
</div>
<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="userLang">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.userLang} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
	<input type="text" class="form-control input-sm" name="user_lang" id="user_lang" tabindex="1" value="${taskConfig.userLang!}"/>
		
	</div>
</div>

<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="productName">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.productName} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
	<input type="text" class="form-control input-sm" name="product_name" id="product_name" tabindex="1" value="${taskConfig.productName!}"/>
		
	</div>
</div>

<div class="form-group">
	<button type="submit" value="apply" name="apply" class="btn btn-primary btn-sm btn-flat">
		<i class="glyphicon glyphicon-ok-circle"></i>&nbsp;#i18n{module.workflow.eudonetrestforms.task_eudonet_config.button.apply}
	</button>
</div>


<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="idForms">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.forms} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
		<@comboWithParams name="id_forms" default_value=idForms?string additionalParameters="class=\"input-xxlarge\"" items=list_forms />
		<button type="submit" value="apply" name="apply" class="btn btn-primary btn-sm btn-flat">
			<i class="glyphicon glyphicon-ok-circle"></i>&nbsp;#i18n{module.workflow.eudonetrestforms.task_eudonet_config.button.apply}
		</button>
	</div>
</div>


<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="idForms">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.tableEudonet} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
		<@comboWithParams name="id_tableEudonet" default_value=idTableEudonet?string additionalParameters="class=\"input-xxlarge\"" items=list_tableEudonet />
		<button type="submit" value="apply" name="apply" class="btn btn-primary btn-sm btn-flat">
			<i class="glyphicon glyphicon-ok-circle"></i>&nbsp;#i18n{module.workflow.eudonetrestforms.task_eudonet_config.button.apply}
		</button>
	</div>
</div>

<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="idForms">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.mapping_annexe} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
		<@comboWithParams name="id_tableEudonet_link" default_value="" additionalParameters="class=\"input-xxlarge\"" items=list_tableEudonet_link />
	</div>
</div>

<div class="form-group">
	<label class="control-label col-xs-12 col-sm-12 col-md-3 col-lg-3" for="idForms">#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.mapping} </label>
	<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
		#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.default_entry_value} : 
		<input type="checkbox"  id="entry_value" >
		<div id="id_entry_default_value" style="display:inline-block;" >
			<input type="text" class="form-control input-sm" name="entry_default_value" value=""/>
		</div>
		<div id="id_entry_value" style="display:inline-block;">
			<@comboWithParams name="order_entry" default_value=idForms?string additionalParameters="class=\"input-xxlarge\"" items=list_entries />
		</div>
		<@comboWithParams name="eudonet_attribut" default_value="" additionalParameters="class=\"input-xxlarge\"" items=list_attribut />
		<button type="submit" value="createEntry" name="apply" class="btn btn-primary btn-sm btn-flat">
			<i class="glyphicon glyphicon-ok-circle"></i>&nbsp;#i18n{module.workflow.eudonetrestforms.task_eudonet_config.button.apply}
		</button>
	</div>
</div>


<#if entries?exists && entries?has_content >
<@table>
        <tr>
            <input type="hidden" id="id" name="id"/>
            <th>Attribut Eudonet</th>
            <th>Table Eudonet</th>
            <th>Annexe (PJ)</th>
            <th>#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.entry_value}</th>
            <th>#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.name_entry_value}</th>
            <th>#i18n{module.workflow.eudonetrestforms.task_eudonet_config.label.default_entry_value}</th>
            <th>#i18n{portal.util.labelActions}</th>
        </tr>
        <@tableHeadBodySeparator />
            <#list entries as entrie >
        <tr>
            <input type="hidden" id="id" name="id"/>
            <td>
              ${entrie.idAttribut!}
            </td>
            <td>
              ${entrie.idTable!}
            </td>
            <td>
              ${entrie.idTableLink!}
            </td>
            <td>
            	<#if entrie.orderQuestion?has_content >
              		${entrie.orderQuestion!}
              	</#if>
            </td>
            <td>
              <#list list_entries as ent>
              	<#if entrie.orderQuestion?has_content && ent.code?string == entrie.orderQuestion?string  >
					${ent.name!}
				</#if>
			</#list>
            </td>
            <td>
            	${entrie.defaultValue!}
            </td>
        <td>
	 
	   <button type="submit" value="deleteEntry" name="apply" class="btn btn-danger btn-small" onClick="updateIdEntry(${entrie.id});">
			<i class="fa fa-trash"></i>&nbsp;#i18n{module.workflow.eudonetrestforms.task_eudonet_config.button.delete}
	   </button>
 	 
        </td>
        </tr>
        </#list>
    </@table>
</#if>
</#if>
 <input id="id_entry" type="hidden" name="id_entry" value="" ></input>
<script>
function updateIdEntry(idEntry){
	$('#id_entry').val(idEntry);
};

$(document).ready(function(){
	$("#id_entry_default_value").hide();
    $('#entry_value').change(function(){
        if(this.checked){
        	$("#id_entry_default_value").show();
    		$("#id_entry_value").hide();
        }
        else{
        	$("#id_entry_default_value").hide();
    		$("#id_entry_value").show();
        }

    });
});
</script>